<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Cornell Mafia Club</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/slate/bootstrap.min.css">
  </head>
  <body>

    <div class="container">
    <h1>Cornell Mafia Club</h1>
    <p>
    The Cornell Mafia Club is a student-run organization that holds weekly
    meetings for the purpose of playing Mafia, a role-playing game that blends
    the logical and the psychological with a twist of mystery. In every match,
    an uninformed majority faces off against a hidden, well-informed minority
    in a battle for the ages, moderated by whichever member feels brave enough
    to put their own game design to the test. Membership is free, easy, and
    simple: just show up! The club meets every Friday night at the Keeton House
    Common Room, 9 p.m. Drinks and snacks are provided, courtesy of Keeton
    House.
    </p>

    <h2>Rules</h2>
    <p>
    The game begins with the night phase.
    </p>

    <h3>Night</h3>
    <p>
    The moderator wakes up the Mafia. The Mafia agree on a player to kill as a
    group. Other players are woken up to perform their night actions.
    </p>

    <h3>Day</h3>
    <p>
    All of the players wake up, usually discovering a that one of the members
    of the town has died. The day phase consists of 4 distinct phases.
    <ol>
      <li>First players form a block. In order to be put on the block a player
        must first be nominated and then seconded by two different players.
      </li>
      <li>When 2-3 players on the block each of the players on the block give a
        defense.
      </li>
      <li>
        All of the members of the town are then given a few minutes to discuss
        who should be lynched.
      </li>
      <li>Finally the town votes on the people on the block and the person who
        recieves the most votes is killed.
      </li>
      <li>After voting all of the players go to sleep for the night and the
        cycle repeats.
      </li>
    </ol>
    <p>
    In addition, during the day, players may motion for a "no lynch" or a
    "reblock" at any point during the day (except during voting). If another
    player seconds this motion either the town proceeds directly to the night
    phase or the current block is disbanded and a new different one is formed.
    Each one of these options can be used at most once per game.
    </p>

    <h3>Game End</h3>
    <p>
    The game ends when the town has succeeded at killing all of the Mafia or the
    Mafia has succeeded at gaining control of the town.
    </p>

    <h2>Formats</h2>
    <p>
    We play mafia in several different formats.
    </p>

    <h3>Open</h3>
    <p>
    Everyone knows all of the in the game the game are known at the start.
    Roles aren't announced when players die.
    </p>

    <h3>Closed</h3>
    <p>
    Roles are chosen from a specific list of roles. Roles are announced as
    players die. You can look at the various role sets we use below.
    </p>

    <ul class="nav nav-tabs">
      <li class="active"><a href="#tier-1" data-toggle="tab" aria-expanded="true">Tier 1</a></li>
      <li class=""><a href="#tier-3" data-toggle="tab" aria-expanded="false">Tier 3</a></li>
      <li class=""><a href="#tier-4" data-toggle="tab" aria-expanded="false">Tier 4 (Coming Soon)</a></li>
    </ul>
    <div id="tiers" class="tab-content">
      <div class="tab-pane fade active in" id="tier-1">
        <p>
        This format is the simplest and designed to introduce new players to
        the closed format of gameplay. <a href="/tier-1/">Click here</a> for
        additional details.
        </p>
        <div id="tier-1-list" class="container">
        </div>
      </div>
      <div class="tab-pane fade" id="tier-3">
        <p>
        This format is designed to promote competitive gameplay.
        <a href="/tier-3/">Click here</a> for additional details.
        </p>
        <div id="tier-3-list" class="container">
        </div>
      </div>
      <div class="tab-pane fade" id="tier-4">
        <p>
        A managably crazy format designed to be distinct from Tier 3 while
        still keeping its original spirit. <a href="/tier-4/">Click here</a>
        for additional details.
        </p>
        <div id="tier-4-list" class="container">
        </div>
      </div>
    </div>

    <!-- I exclude super closed because this is not a crown jewel that new
      players should be introduced to.
    <h3>Super Closed</h3>
    <p>
    Any role may be used. Roles are announced as players die.
    </p>
    </div>
    -->
    </div>

    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"></script>
    <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/list.js/1.5.0/list.min.js"></script>

    <script type="text/javascript">
var popover = function(name, description, team) {
  return '<button type="button" class="btn btn-default" href="#" data-content="'
    + description
    + '" rel="popover" data-placement="top" data-original-title="'
    + name + ' - ' + team
    + '" data-toggle="popover" data-trigger="hover">'
    + name
    + '<\/button>';
};

function makeList(tier) {
  $.getJSON('/tier-' + tier + '/roles.json')
    .done(function(data) {
      $.each(data, function(ix, e) {
        $('#tier-' + tier + '-list')
          .append(popover(e.name, e.description, e.team));
      });
      $('[data-toggle="popover"]').popover();
    });
}

makeList(1);
makeList(3);
makeList(4);
    </script>
  </body>
</html>
